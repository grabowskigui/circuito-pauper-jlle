<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPJ | Circuito Pauper Joinville</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --cpj-blue: #0a2240; --cpj-red: #e31d1a; }
        body { background-color: #ffffff; font-family: 'Inter', sans-serif; color: #1a1a1a; scroll-behavior: smooth; }
        .text-cpj-blue { color: var(--cpj-blue); }
        .bg-cpj-blue { background-color: var(--cpj-blue); }
        .border-cpj-red { border-color: var(--cpj-red); }
    </style>
</head>
<body>

    <nav class="bg-white/90 backdrop-blur-md border-b border-gray-100 py-4 px-6 md:py-6 md:px-12 flex justify-between items-center sticky top-0 z-50">
        
        <button onclick="toggleMenu()" class="md:hidden p-2 text-[#0a2240] hover:bg-gray-100 rounded-lg transition-colors">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>

        <div class="hidden md:flex gap-12 font-bold text-[11px] uppercase tracking-[0.2em] text-gray-400 absolute left-1/2 transform -translate-x-1/2">
            <a href="#ranking" class="hover:text-[#0a2240] transition-colors">Ranking</a>
            <a href="#proximos-eventos" class="hover:text-[#0a2240] transition-colors">Calend√°rio</a>
            <a href="#campeoes" class="hover:text-[#0a2240] transition-colors">Hall da Fama</a>
        </div>

        <a href="https://chat.whatsapp.com/GtbH7LexnG53Oot2pWfOOl" target="_blank" class="bg-[#25D366] text-white px-4 py-2 md:px-8 md:py-3 rounded-full font-black text-[9px] md:text-[10px] tracking-widest shadow-lg hover:scale-105 transition-all flex items-center gap-2">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
            <span class="md:inline">WHATSAPP</span>
        </a>
    </nav>

   <div id="mobile-menu-overlay" class="fixed inset-0 bg-[#0a2240] z-[60] hidden flex-col items-center justify-center gap-8 opacity-0 transition-opacity duration-300">
        
        <div class="absolute top-[-10%] right-[-10%] w-64 h-64 bg-red-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"></div>
        <div class="absolute bottom-[-10%] left-[-10%] w-64 h-64 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20"></div>

        <button onclick="toggleMenu()" class="absolute top-6 right-6 p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-full transition-all z-10">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>

        <div class="w-32 mb-4 drop-shadow-2xl z-10">
            <img src="img/logo-cpj.png" alt="Logo CPJ" class="w-full opacity-90">
        </div>

        <div class="flex flex-col items-center gap-6 w-full z-10">
            
            <a href="#ranking" onclick="toggleMenu()" class="group relative px-8 py-3 text-xl font-bold text-white uppercase tracking-[0.2em] transition-all">
                <span class="relative z-10 group-hover:text-red-400 transition-colors">Ranking</span>
                <span class="absolute inset-0 bg-white/5 scale-0 group-hover:scale-100 rounded-xl transition-transform duration-300"></span>
            </a>
            
            <a href="#proximos-eventos" onclick="toggleMenu()" class="group relative px-8 py-3 text-xl font-bold text-white uppercase tracking-[0.2em] transition-all">
                <span class="relative z-10 group-hover:text-red-400 transition-colors">Calend√°rio</span>
                <span class="absolute inset-0 bg-white/5 scale-0 group-hover:scale-100 rounded-xl transition-transform duration-300"></span>
            </a>
            
            <a href="#campeoes" onclick="toggleMenu()" class="group relative px-8 py-3 text-xl font-bold text-white uppercase tracking-[0.2em] transition-all">
                <span class="relative z-10 group-hover:text-red-400 transition-colors">Hall da Fama</span>
                <span class="absolute inset-0 bg-white/5 scale-0 group-hover:scale-100 rounded-xl transition-transform duration-300"></span>
            </a>
            
            <a href="#gameplays" onclick="toggleMenu()" class="group relative px-8 py-3 text-xl font-bold text-white uppercase tracking-[0.2em] transition-all">
                <span class="relative z-10 group-hover:text-red-400 transition-colors">Gameplays</span>
                <span class="absolute inset-0 bg-white/5 scale-0 group-hover:scale-100 rounded-xl transition-transform duration-300"></span>
            </a>

        </div>

        <div class="absolute bottom-10 text-center z-10">
             <p class="text-[10px] text-white/40 uppercase tracking-[0.3em] font-bold">Temporada 2026</p>
             <div class="w-12 h-1 bg-red-600 mx-auto mt-4 rounded-full"></div>
        </div>
    </div>

    </div>

    <header id="home" class="pt-8 pb-16 px-6 text-center max-w-7xl mx-auto">
        <div class="mb-4">
            <img src="img/logo-cpj.png" alt="Logo CPJ" class="w-64 md:w-[380px] mx-auto drop-shadow-2xl animate-in zoom-in duration-700">
        </div>
        <div class="overflow-visible pb-2"> 
            <h1 class="text-5xl md:text-8xl font-black text-[#0a2240] tracking-tighter uppercase italic leading-[0.9] flex flex-col items-center">
                <span class="block">CIRCUITO PAUPER</span>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-red-600 to-red-800 pr-4 py-1">JOINVILLE</span>
            </h1>
        </div>
        <p class="text-gray-400 text-lg md:text-xl font-medium max-w-2xl mx-auto leading-relaxed mt-4">
            Onde os comuns se tornam lendas. Temporada 2026.
        </p>
    </header>

    <section id="ranking" class="py-20 bg-gray-50 px-6">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="text-4xl font-black uppercase italic tracking-tighter text-cpj-blue mb-12">Ranking Geral</h2>
            <div class="bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100 min-h-[500px]">
               <table class="w-full text-sm table-fixed">
    <thead>
        <tr class="text-left text-[10px] uppercase tracking-widest text-gray-400 border-b">
            <th class="w-[15%] py-3 text-center">Pos</th>
            <th class="w-[60%] py-3 pl-2">Jogador</th>
            <th class="w-[25%] py-3 text-right pr-4">Pontos</th>
        </tr>
    </thead>
    <tbody id="tabela-ranking-body" class="divide-y divide-gray-50"></tbody>
</table>
            </div>
            <div class="mt-10 flex justify-center items-center gap-6">
                <button onclick="mudarPagina(-1)" id="btn-prev" class="p-3 rounded-full border border-gray-200 text-gray-400 hover:border-cpj-red hover:text-cpj-red disabled:opacity-30 disabled:cursor-not-allowed transition-all">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M15 19l-7-7 7-7"></path></svg>
                </button>
                <div class="flex flex-col">
                    <span id="info-pagina" class="text-[10px] font-black uppercase tracking-widest text-cpj-blue">P√°gina 1</span>
                    <span id="info-posicao" class="text-[9px] text-gray-400 font-bold uppercase tracking-tight">Mostrando 1-8</span>
                </div>
                <button onclick="mudarPagina(1)" id="btn-next" class="p-3 rounded-full border border-gray-200 text-gray-400 hover:border-cpj-red hover:text-cpj-red disabled:opacity-30 disabled:cursor-not-allowed transition-all">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M9 5l7 7-7 7"></path></svg>
                </button>
            </div>
        </div>
    </section>

<section class="py-20 bg-white px-6 border-t border-gray-100">
        <div class="max-w-4xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
                <div>
                    <h2 class="text-4xl font-black text-[#0a2240] uppercase italic tracking-tighter">Meta Game</h2>
                    <p class="text-gray-400 font-bold uppercase text-[10px] tracking-[0.3em] mt-2">O que est√° dominando o field</p>
                </div>
                <div class="text-right">
                    <span class="text-xs font-bold text-gray-500 uppercase tracking-widest">Baseado nos √∫ltimos torneios</span>
                </div>
            </div>

            <div id="meta-game-container" class="grid gap-6 transition-all duration-500">
                <p class="text-center text-gray-400 text-xs animate-pulse">Carregando estat√≠sticas...</p>
            </div>

            <div id="meta-btn-container" class="text-center mt-10 hidden">
                <button onclick="toggleMetaGame()" id="btn-meta-expandir" class="inline-flex items-center gap-2 border-2 border-gray-100 text-gray-400 font-black text-xs px-8 py-4 rounded-full hover:border-cpj-red hover:text-cpj-red transition-all uppercase tracking-widest">
                    <span>Ver Meta Completo</span>
                    <svg id="seta-meta" class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 9l-7 7-7-7"></path></svg>
                </button>
            </div>
    </section>

    <section id="proximos-eventos" class="py-24 px-6 bg-white">
        <div class="max-w-4xl mx-auto">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-black text-cpj-blue uppercase italic tracking-tighter">üóìÔ∏è Calend√°rio de Etapas</h2>
                <p class="text-gray-400 font-bold uppercase text-[10px] tracking-[0.3em] mt-2">Temporada 2026</p>
            </div>
            <div id="calendario-container" class="grid gap-3"></div>
            <div class="text-center mt-10">
                <button id="btn-expandir" onclick="toggleCalendario()" class="inline-flex items-center gap-2 border-2 border-gray-100 text-gray-400 font-black text-xs px-8 py-4 rounded-full hover:border-cpj-red hover:text-cpj-red transition-all uppercase tracking-widest">
                    <span>Ver Calend√°rio Completo</span>
                    <svg id="seta-expandir" class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 9l-7 7-7-7"></path></svg>
                </button>
            </div>
        </div>
    </section>

<section id="campeoes" class="py-24 px-6 max-w-6xl mx-auto border-t border-gray-100">
    <h2 class="text-4xl font-black text-cpj-blue mb-16 uppercase italic tracking-tighter text-center">üèÜ Hall da Fama</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12">
        
        <div class="group relative pt-16">
            <div class="bg-white rounded-[2rem] border border-gray-100 shadow-xl p-8 pt-16 text-center group-hover:shadow-2xl transition-all duration-300 border-b-8 border-red-600">
                <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 w-32 h-32 rounded-full border-8 border-white shadow-lg overflow-hidden z-10">
                    <img src="img\ETAPA01.JPG" alt="Campe√£o" class="w-full h-full object-cover">
                </div>
                
                <span class="text-[10px] font-black tracking-[0.3em] text-red-600 uppercase block mb-2">Vencedor Etapa #1</span>
                <h3 class="text-2xl font-black text-cpj-blue mb-2 leading-tight italic">Gustavo Schwarz</h3>
                
                <p class="text-[#0a2240] font-bold text-sm uppercase tracking-widest mb-8 opacity-60 italic">UB Crab Control</p>

                <a href="https://moxfield.com/decks/w9Uy3gzcSkKHqNWUzrCY0w" target="_blank" class="inline-block w-full py-5 bg-[#0a2240] text-white rounded-2xl font-black text-xs tracking-widest hover:bg-black transition-all shadow-lg uppercase">
                    View Decklist
                </a>
            </div>
        </div>
<div class="group relative pt-16">
            <div class="bg-white rounded-[2rem] border border-gray-100 shadow-xl p-8 pt-16 text-center group-hover:shadow-2xl transition-all duration-300 border-b-8 border-red-600">
                <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 w-32 h-32 rounded-full border-8 border-white shadow-lg overflow-hidden z-10">
                    <img src="img\ETAPA02.JPG" alt="Campe√£o" class="w-full h-full object-cover">
                </div>
                
                <span class="text-[10px] font-black tracking-[0.3em] text-red-600 uppercase block mb-2">Vencedor Etapa #2</span>
                
                <h3 class="text-2xl font-black text-[#0a2240] mb-2 leading-tight italic">Eron Moggio</h3>
                
                <p class="text-[#0a2240] font-bold text-sm uppercase tracking-widest mb-8 opacity-60 italic">BW Blade</p>

                <a href="https://moxfield.com/decks/21u9iqGsAke7C-Y1ae2zog" target="_blank" class="inline-block w-full py-5 bg-[#0a2240] text-white rounded-2xl font-black text-xs tracking-widest hover:bg-black transition-all shadow-lg uppercase">
                    View Decklist
                </a>
            </div>
        </div>
        </div>
</section>

    <footer class="bg-[#0a2240] text-white py-10 px-6 border-t border-white/5">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-16 md:gap-8">
            <div class="flex flex-col items-center md:items-start text-center md:text-left">
                <img src="img/logo-cpj.png" alt="Logo CPJ" class="h-40 w-auto mb-16 grayscale brightness-200 opacity-75">
                <p class="text-gray-400 text-sm leading-relaxed max-w-xs uppercase font-bold tracking-tighter">
                    Circuito Pauper Joinville.<br>
                    Onde os comuns se tornam lendas. Temporada 2026.
                </p>
            </div>
            <div class="flex flex-col items-center text-center">
                <h4 class="text-xs font-black uppercase tracking-[0.3em] mb-8 text-red-600">Comunidade</h4>
                <div class="flex flex-col gap-4">
                    <a href="https://chat.whatsapp.com/GtbH7LexnG53Oot2pWfOOl" target="_blank" class="text-sm font-bold hover:text-red-600 transition-colors uppercase tracking-widest">WhatsApp</a>
                    <a href="https://www.instagram.com/jpcpauper/" class="text-sm font-bold hover:text-red-600 transition-colors uppercase tracking-widest">Instagram</a>
                    <a href="#" class="text-sm font-bold hover:text-red-600 transition-colors uppercase tracking-widest">Youtube</a>
                </div>
            </div>
            <div class="flex flex-col items-center md:items-end text-center md:text-right">
                <h4 class="text-xs font-black uppercase tracking-[0.3em] mb-8 text-red-600">Apoio</h4>
                <a href="https://www.magigames.com.br/" target="_blank" class="text-sm font-bold text-gray-400 uppercase tracking-widest mb-2">Magi Games</a>
                <p class="text-[10px] text-gray-500 uppercase tracking-widest">Joinville, SC</p>
                <div class="mt-8">
                </div>
            </div>
        </div>
        <div class="max-w-7xl mx-auto mt-20 pt-8 border-t border-white/5 flex flex-col md:flex-row justify-between items-center gap-4">
            <p class="text-[9px] font-bold text-gray-600 uppercase tracking-[0.3em]">¬© 2026 Circuito Pauper Joinville</p>
            <p class="text-[9px] font-bold text-gray-600 uppercase tracking-[0.3em]">Desenvolvido para a Comunidade</p>
        </div>
    </footer>

    <script>
        // L√ìGICA DO RANKING
        const SHEET_CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSs3dG3a3b_rjQlUwFZL3G48wOoTv5OSnnRtNsan7sk56QWe4Lf02uQ8X-ltOoD2kOczcmv6K_387gs/pub?output=csv';
        let rankingCompleto = [];
        let paginaAtual = 1;
        const jogadoresPorPagina = 8;

        async function carregarRanking() {
            try {
                const response = await fetch(SHEET_CSV_URL);
                const data = await response.text();
                rankingCompleto = data.split('\n').slice(1).filter(l => l.trim() !== "");
                renderRanking();
            } catch (error) {
                document.getElementById('tabela-ranking-body').innerHTML = '<tr><td colspan="3" class="p-10 text-red-500 text-center">Erro ao carregar dados.</td></tr>';
            }
        }

function renderRanking() {
            const tbody = document.getElementById('tabela-ranking-body');
            const inicio = (paginaAtual - 1) * jogadoresPorPagina;
            const fim = inicio + jogadoresPorPagina;
            const listaParaExibir = rankingCompleto.slice(inicio, fim);

            tbody.innerHTML = listaParaExibir.map((linha, index) => {
                const colunas = linha.split(',');
                
                // 1. PEGA OS DADOS
                const nome = colunas[1]?.trim() || "---";
                const pontos = colunas[2]?.trim() || "0";
                const variacao = colunas[3]?.trim() || "0"; 

                // 2. CALCULA A POSI√á√ÉO REAL
                const posReal = inicio + index + 1;

                // 3. CORES DO P√ìDIO
                let corPos = 'text-gray-400';
                if (posReal === 1) corPos = 'text-yellow-500';
                if (posReal === 2) corPos = 'text-gray-400 font-bold';
                if (posReal === 3) corPos = 'text-amber-600';

                // 4. L√ìGICA DAS SETINHAS
                let htmlVariacao = '<span class="text-gray-300 text-[10px]">-</span>'; 

                if (variacao === 'NEW') {
                      htmlVariacao = '<span class="text-blue-500 text-[9px] font-black tracking-tighter uppercase bg-blue-50 px-1 rounded border border-blue-100">NEW</span>';
                } else {
                    const val = parseInt(variacao);
                    if (val > 0) {
                        htmlVariacao = `
                            <div class="flex items-center gap-1 text-green-500 bg-green-50 px-1.5 py-0.5 rounded border border-green-100">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 10l7-7m0 0l7 7m-7-7v18"></path></svg>
                                <span class="text-[10px] font-black">${val}</span>
                            </div>`;
                    } else if (val < 0) {
                        htmlVariacao = `
                            <div class="flex items-center gap-1 text-red-500 bg-red-50 px-1.5 py-0.5 rounded border border-red-100">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
                                <span class="text-[10px] font-black">${Math.abs(val)}</span>
                            </div>`;
                    }
                }

                // 5. RETORNA O HTML DA LINHA (Com layout travado)
                return `
                    <tr class="hover:bg-gray-50 transition border-b border-gray-50 last:border-0 h-16">
                        <td class="font-black text-lg md:text-xl ${corPos} italic text-center align-middle">
                            <div class="flex flex-col items-center justify-center gap-1">
                                <span>${posReal}¬∫</span>
                                ${htmlVariacao}
                            </div>
                        </td>
                        
                        <td class="font-bold text-gray-800 uppercase tracking-tight text-left align-middle text-xs md:text-sm pl-2">
                            <div class="truncate w-full pr-2">
                                ${nome}
                            </div>
                        </td>
                        
                        <td class="text-right font-black text-[#0a2240] italic align-middle text-sm md:text-lg pr-4">
                            ${pontos} <span class="text-[8px] md:text-[10px] text-gray-400 font-normal not-italic">PTS</span>
                        </td>
                    </tr>
                `;
            }).join(''); 

            // ATUALIZA RODAP√â
            document.getElementById('info-pagina').innerText = `P√°gina ${paginaAtual}`;
            if(rankingCompleto.length > 0) {
                 document.getElementById('info-posicao').innerText = `Mostrando ${inicio + 1}-${Math.min(fim, rankingCompleto.length)}`;
            }
            document.getElementById('btn-prev').disabled = paginaAtual === 1;
            document.getElementById('btn-next').disabled = fim >= rankingCompleto.length;
        }

        function mudarPagina(direcao) {
            paginaAtual += direcao;
            renderRanking();
            document.getElementById('ranking').scrollIntoView({ behavior: 'smooth' });
        }

    // L√ìGICA DO CALEND√ÅRIO
        const etapas = [
            // ADICIONEI O "status" NAS 3 PRIMEIRAS:
            { n: '01', data: '06/01/2026', valor: 'R$ 20,00', local: 'Magi Games', status: 'done' },
            { n: '02', data: '13/01/2026', valor: 'R$ 20,00', local: 'Magi Games', status: 'done' },
            { n: '03', data: '20/01/2026', valor: 'R$ 20,00', local: 'Magi Games', status: 'next' },
            
            // As outras continuam normais (sem status):
            { n: '04', data: '27/01/2026', valor: 'R$ 20,00', local: 'Magi Games' },
            { n: '05', data: '03/02/2026', valor: 'R$ 20,00', local: 'Magi Games' },
            { n: '06', data: '10/02/2026', valor: 'R$ 20,00', local: 'Magi Games' },
            { n: '07', data: '17/02/2026', valor: 'R$ 20,00', local: 'Magi Games' },
            { n: '08', data: '24/02/2026', valor: 'R$ 20,00', local: 'Magi Games' },
            { n: '09', data: '03/03/2026', valor: 'R$ 20,00', local: 'Magi Games' },
            { n: '10', data: '10/03/2026', valor: 'R$ 20,00', local: 'Magi Games' }
        ];

        let expandido = false;

        function renderCalendario() {
            const container = document.getElementById('calendario-container');
            // Agora mostra 5 itens no in√≠cio para garantir que a "pr√≥xima" apare√ßa se for a 3 ou 4
            const listaParaExibir = expandido ? etapas : etapas.slice(0, 5); 

            container.innerHTML = listaParaExibir.map(e => {
                // L√≥gica dos visuais (DONE e NEXT)
                let visualClasses = 'border-gray-100 hover:border-cpj-red'; // Padr√£o
                let badge = '';

                if (e.status === 'done') {
                    visualClasses = 'border-green-100 bg-gray-50 opacity-60'; // Fica mais apagadinho
                    badge = '<span class="bg-green-100 text-green-700 border border-green-200 px-2 py-1 rounded text-[9px] font-black uppercase tracking-widest">Conclu√≠do</span>';
                } 
                else if (e.status === 'next') {
                    visualClasses = 'border-red-600 shadow-lg ring-1 ring-red-100 bg-white transform scale-[1.02]'; // Ganha destaque
                    badge = '<span class="bg-red-600 text-white px-3 py-1 rounded text-[9px] font-black uppercase tracking-widest animate-pulse shadow-md">Pr√≥xima Etapa</span>';
                }

                return `
                <div class="flex flex-col md:flex-row md:items-center justify-between p-5 rounded-2xl border transition-all group ${visualClasses}">
                    <div class="mb-3 md:mb-0 flex flex-col gap-2">
                        <div class="flex items-center gap-3">
                            <span class="text-[9px] font-black ${e.status === 'next' ? 'text-red-600' : 'text-gray-400'} uppercase tracking-widest">Etapa ${e.n}</span>
                            ${badge}
                        </div>
                        <h3 class="text-md font-black text-[#0a2240] uppercase italic">Circuito Pauper Joinville</h3>
                    </div>
                    <div class="grid grid-cols-3 md:flex gap-6 text-[11px] font-bold uppercase text-gray-600">
                        <div class="flex flex-col"><span class="text-gray-400 text-[9px] mb-1 font-normal">Data</span>${e.data}</div>
                        <div class="flex flex-col"><span class="text-gray-400 text-[9px] mb-1 font-normal">Valor</span>${e.valor}</div>
                        <div class="flex flex-col"><span class="text-gray-400 text-[9px] mb-1 font-normal">Local</span>${e.local}</div>
                    </div>
                </div>
            `}).join('');
        }

        function toggleCalendario() {
            expandido = !expandido;
            renderCalendario();
            const btn = document.getElementById('btn-expandir');
            const seta = document.getElementById('seta-expandir');
            btn.querySelector('span').innerText = expandido ? 'Mostrar Menos' : 'Ver Calend√°rio Completo';
            seta.style.transform = expandido ? 'rotate(180deg)' : 'rotate(0deg)';
        }

        // Inicializa√ß√£o
        carregarRanking();
        renderCalendario();

        // FUN√á√ÉO MENU MOBILE
        function toggleMenu() {
            const menu = document.getElementById('mobile-menu-overlay');
            
            if (menu.classList.contains('hidden')) {
                // ABRIR
                menu.classList.remove('hidden');
                // Pequeno delay para a anima√ß√£o de opacidade funcionar
                setTimeout(() => {
                    menu.classList.remove('opacity-0');
                    menu.classList.add('opacity-100');
                }, 10);
            } else {
                // FECHAR
                menu.classList.remove('opacity-100');
                menu.classList.add('opacity-0');
                // Espera a anima√ß√£o terminar para esconder de verdade
                setTimeout(() => {
                    menu.classList.add('hidden');
                }, 300);
            }
        }

// --- L√ìGICA DO META GAME (COM BOT√ÉO "VER MAIS") ---
        const META_CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ1-fHtMSqio6beIEqEiTB9LwyyqMyJ2OV1MbvNipdXPPEJlvsIF45EEhv6mNhF5caAAN73aWSZ-Pua/pub?gid=1925365919&single=true&output=csv';
        
        let metaDadosCache = []; // Guarda os dados aqui para n√£o baixar de novo
        let metaExpandido = false; // Come√ßa fechado

        async function carregarMetaGame() {
            try {
                const response = await fetch(META_CSV_URL);
                const data = await response.text();
                const linhas = data.split('\n').filter(l => l.trim() !== "");
                
                let totalDecks = 0;
                
                // Processa os dados e guarda na vari√°vel global 'metaDadosCache'
                metaDadosCache = linhas.map(linha => {
                    const colunas = linha.split(',');
                    const nome = colunas[0]?.trim();
                    const qtd = parseInt(colunas[1]?.trim() || "0");
                    
                    if(nome && qtd) {
                        totalDecks += qtd;
                        return { nome, qtd };
                    }
                    return null;
                }).filter(i => i !== null);

                // Adiciona o total de decks em cada item para calcular % depois
                metaDadosCache.forEach(d => d.totalGeral = totalDecks);

                // Chama a fun√ß√£o que desenha na tela
                renderMetaVisual();

            } catch (error) {
                console.error("Erro meta:", error);
                document.getElementById('meta-game-container').innerHTML = '<p class="text-center text-red-500 text-xs">Erro.</p>';
            }
        }

        function renderMetaVisual() {
            const container = document.getElementById('meta-game-container');
            const btnContainer = document.getElementById('meta-btn-container');
            
            // Aqui √© o segredo: Se estiver expandido mostra tudo, sen√£o s√≥ os 4 primeiros
            const listaParaExibir = metaExpandido ? metaDadosCache : metaDadosCache.slice(0, 4);
            
            container.innerHTML = '';

            listaParaExibir.forEach(deck => {
                const porcentagem = ((deck.qtd / deck.totalGeral) * 100).toFixed(1); 
                
                container.innerHTML += `
                    <div class="group animate-in fade-in slide-in-from-bottom-4 duration-700">
                        <div class="flex justify-between text-sm font-bold text-[#0a2240] uppercase tracking-wider mb-2">
                            <span>${deck.nome}</span>
                            <span>${porcentagem}% <span class="text-[9px] text-gray-400 font-normal">(${deck.qtd})</span></span>
                        </div>
                        <div class="w-full bg-gray-100 rounded-full h-3 overflow-hidden">
                            <div class="bg-red-600 h-3 rounded-full group-hover:bg-[#0a2240] transition-all duration-1000" style="width: ${porcentagem}%"></div>
                        </div>
                    </div>
                `;
            });

            // S√≥ mostra o bot√£o se tiver mais de 4 decks no total
            if (metaDadosCache.length > 4) {
                btnContainer.classList.remove('hidden');
                
                // Atualiza o texto e a seta do bot√£o
                const btn = document.getElementById('btn-meta-expandir');
                const seta = document.getElementById('seta-meta');
                btn.querySelector('span').innerText = metaExpandido ? 'Mostrar Menos' : 'Ver Meta Completo';
                seta.style.transform = metaExpandido ? 'rotate(180deg)' : 'rotate(0deg)';
            }
        }

        function toggleMetaGame() {
            metaExpandido = !metaExpandido;
            renderMetaVisual(); // Redesenha a tela
        }

        carregarMetaGame();
    </script>
    
</body>
</html>